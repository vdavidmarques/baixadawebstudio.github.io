var body = document.querySelector("body");

function openMenu() {
  var element = document.querySelectorAll(".menu-slider");
  element.forEach(function (el) {
    el.classList.add("openned");
  });

  var main = document.querySelectorAll("main");
  main.forEach(function(e){
    e.classList.add('menu-mobile-openned');
  });
} 

function closeMenu() {
  var close = document.querySelectorAll(".menu-slider");
  close.forEach(function (item) {
    item.classList.remove("openned");
  });

  var closeMain = document.querySelectorAll("main");
  closeMain.forEach(function(items){
    items.classList.remove("menu-mobile-openned");
  });
}

document.addEventListener('DOMContentLoaded', function() {
  var menuModal = document.querySelector('.menu-slider');
  var menuItems = document.querySelectorAll('.menu-slider .item');

  // Close the modal when any menu item is clicked
  menuItems.forEach(function(item) {
    item.addEventListener('click', function() {
      menuModal.classList.remove("openned");
      body.classList.remove("overflow-hidden");
    });
  });
});

function loadPopupContent(id) {
  fetch("./popup-content.html")
    .then((response) => response.text())
    .then((data) => {
      const parser = new DOMParser();
      const doc = parser.parseFromString(data, "text/html");
      const content = doc.querySelector(`#${id}`).innerHTML;
      showPopup(content);
    })
    .catch((error) => console.error("Error loading popup content:", error));
}

function showPopup(content) {
  const popup = document.createElement("div");
  popup.classList.add("popup");
  popup.innerHTML = `<div class="popup-content"><span class="close">&times;</span><p>${content}</p></div>`;
  document.body.appendChild(popup);
  body.classList.add("overflow-hidden");
  document.querySelector(".popup .close").addEventListener("click", () => {
    document.body.removeChild(popup);
    body.classList.remove("overflow-hidden");
  });
}

document.addEventListener("DOMContentLoaded", () => {
  const blocks = document.querySelectorAll(".scroll-effect");

  const handleScroll = () => {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    const windowHeight = window.innerHeight;

    blocks.forEach((block) => {
      const blockTop = block.getBoundingClientRect().top + scrollTop;
      if (scrollTop + windowHeight > blockTop + 50) {
        block.classList.add("visible");
      } else {
        block.classList.remove("visible");
      }
    });
  };

  window.addEventListener("scroll", handleScroll);
  handleScroll(); // Trigger once on load to show blocks in view
});